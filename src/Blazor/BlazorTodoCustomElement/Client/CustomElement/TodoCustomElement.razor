<RadzenCheckBoxList
    Data="@data"
    Value=@Values
    Change="OnChange"
    TValue="int"
    TextProperty="Name"
    ValueProperty="Id" 
    AllowSelectAll="true"
    SelectAllText="Select all items"
    Orientation="Orientation.Vertical"
    >
    
</RadzenCheckBoxList>

<RadzenButton Icon="add_circle_outline" ButtonStyle="ButtonStyle.Primary" Click="AddClicked" />
<RadzenButton Icon="highlight_off" ButtonStyle="ButtonStyle.Primary" Click="RemoveClicked" />

@code {
    [Parameter]
    public IEnumerable<int> Values { get; set; } = new[] { 1 };

    [Parameter]
    public EventCallback<IEnumerable<int>> SelectedValuesChanged { get; set; }

    [Parameter]
    public EventCallback<IEnumerable<BlazorTodoItem>> ValuesChanged { get; set; }

    public class BlazorTodoItem
    {
        public int Id { get; set; }
        public string Name { get; set; }

        public override string ToString()
        {
            return $"{Id} - {Name}";
        }
    }

    List<BlazorTodoItem> data = new()
    {
        new() { Id = 1 , Name = "Présenter Blazor au chapter DEV"},
        new() { Id = 2 , Name = "Présenter Blazor au Radar techno"}
    };

    private async Task AddClicked()
    {
        Random rnd = new Random();
        var randomIndex = rnd.Next(0, _todoBacklog.Length);

        data.Add(new BlazorTodoItem
        {
                Id = data.Count > 0 ? data.Max(i => i.Id) + 1 : 1,
                Name = _todoBacklog[randomIndex]
        });

        if (ValuesChanged.HasDelegate)
        {
            await ValuesChanged.InvokeAsync(data);
        }
    }

    private static string[] _todoBacklog =
    {
        "Présenter Blazor au chapter DEV",
        "Présenter Blazor au Radar techno",
        "Faire un BBL sur Blazor",
        "Faire un BBL sur Blazor & les custom elements",
        "Présenter les custom elements au chapter DEV",
        "Présenter les custom elements au codep",
    };

    private async Task RemoveClicked()
    {
        if (Values != null && Values.Any())
        {
            data.RemoveAll(item => Values.Contains(item.Id));

            if (ValuesChanged.HasDelegate)
            {
                await ValuesChanged.InvokeAsync(data);
            }
        }
    }

    private async Task OnChange(IEnumerable<int> obj)
    {
        Values = obj;
        if (SelectedValuesChanged.HasDelegate)
        {
            await SelectedValuesChanged.InvokeAsync(Values);
        }
    }
}
